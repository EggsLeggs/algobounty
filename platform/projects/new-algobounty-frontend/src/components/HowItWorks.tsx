import { useEffect, useRef } from 'react'
import { PlusCircle, Wallet, Code, Trophy } from '@phosphor-icons/react'
import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger'

// Register ScrollTrigger plugin
gsap.registerPlugin(ScrollTrigger)

const HowItWorks = () => {
  // Refs for each card
  const cardRefs = useRef<(HTMLDivElement | null)[]>([])
  const sectionRef = useRef<HTMLElement>(null)

  // Define unique wonky transforms for each card
  // Reduced intensity: Rotations: -4° to 4°, Translations: -10px to 10px
  const wonkyTransforms = [
    { rotation: -3.5, x: -8, y: 6 }, // Card 1
    { rotation: 3, x: 7, y: -8 },    // Card 2
    { rotation: -2.5, x: -6, y: 9 },  // Card 3
    { rotation: 4, x: 10, y: -7 },    // Card 4
  ]

  // Final slightly wonky state (about 30% of initial wonkiness)
  const finalWonkyTransforms = [
    { rotation: -1, x: -2.5, y: 1.8 }, // Card 1
    { rotation: 0.9, x: 2, y: -2.4 },   // Card 2
    { rotation: -0.75, x: -1.8, y: 2.7 }, // Card 3
    { rotation: 1.2, x: 3, y: -2.1 },   // Card 4
  ]

  const cards = [
    {
      number: '01',
      title: 'CREATE',
      description: 'Create an issue for any linked GitHub repo and the bounty will be automatically created.',
      icon: (
        <div className="w-20 h-20 rounded-full bg-[#D77FD1] flex items-center justify-center border-2 border-[#2d2d2d]">
          <PlusCircle size={40} weight="fill" color="#2d2d2d" />
        </div>
      ),
    },
    {
      number: '02',
      title: 'FUND',
      description: 'Fund your bounty with Algorand tokens locked in a smart contract.',
      icon: (
        <div className="w-20 h-20 rounded-full bg-[#94A159] flex items-center justify-center border-2 border-[#2d2d2d]">
          <Wallet size={40} weight="fill" color="#2d2d2d" />
        </div>
      ),
    },
    {
      number: '03',
      title: 'CONTRIBUTE',
      description: 'Developers work on the issue and submit pull requests to solve it.',
      icon: (
        <div className="w-20 h-20 rounded-full bg-[#E93827] flex items-center justify-center border-2 border-[#2d2d2d]">
          <Code size={40} weight="fill" color="#2d2d2d" />
        </div>
      ),
    },
    {
      number: '04',
      title: 'CLAIM',
      description: 'Claim your reward when the pull request is merged.',
      icon: (
        <div className="w-20 h-20 rounded-full bg-[#94A159] flex items-center justify-center border-2 border-[#2d2d2d]">
          <Trophy size={40} weight="fill" color="#2d2d2d" />
        </div>
      ),
    },
  ]

  useEffect(() => {
    // Set initial wonky state for all cards
    cardRefs.current.forEach((card, index) => {
      if (card) {
        const transform = wonkyTransforms[index]
        gsap.set(card, {
          rotation: transform.rotation,
          x: transform.x,
          y: transform.y,
          scale: 1,
        })
      }
    })

    // Create ScrollTrigger animation with reversible scrub
    const triggers = cardRefs.current.map((card, index) => {
      if (!card) return null

      const finalTransform = finalWonkyTransforms[index]
      return ScrollTrigger.create({
        trigger: card,
        start: 'top 85%',
        end: 'top 30%',
        animation: gsap.to(card, {
          rotation: finalTransform.rotation,
          x: finalTransform.x,
          y: finalTransform.y,
          duration: 1,
          ease: 'power2.out',
        }),
        scrub: true,
      })
    }).filter(Boolean)

    // Add hover animations
    const hoverAnimations = cardRefs.current.map((card) => {
      if (!card) return null

      let hoverTween: gsap.core.Tween | null = null

      const handleMouseEnter = () => {
        if (hoverTween) hoverTween.kill()
        const currentY = gsap.getProperty(card, 'y') as number
        hoverTween = gsap.to(card, {
          scale: 1.05,
          y: currentY - 8,
          duration: 0.3,
          ease: 'power2.out',
          overwrite: 'auto',
        })
      }

      const handleMouseLeave = () => {
        if (hoverTween) hoverTween.kill()
        const currentY = gsap.getProperty(card, 'y') as number
        hoverTween = gsap.to(card, {
          scale: 1,
          y: currentY + 8,
          duration: 0.3,
          ease: 'power2.out',
          overwrite: 'auto',
        })
      }

      card.addEventListener('mouseenter', handleMouseEnter)
      card.addEventListener('mouseleave', handleMouseLeave)

      return { card, handleMouseEnter, handleMouseLeave }
    }).filter(Boolean)

    // Cleanup function
    return () => {
      triggers.forEach((trigger) => {
        if (trigger) trigger.kill()
      })
      hoverAnimations.forEach((anim) => {
        if (anim) {
          anim.card.removeEventListener('mouseenter', anim.handleMouseEnter)
          anim.card.removeEventListener('mouseleave', anim.handleMouseLeave)
        }
      })
    }
  }, [])

  return (
    <section ref={sectionRef} className="relative py-20 px-4 bg-[#2d2d2d] overflow-hidden rounded-4xl ">
      <div className="max-w-7xl mx-auto">
        {/* Title Section */}
        <div className="relative mb-16 text-center">
          {/* Services Label */}
          <div className="text-sm font-medium text-[#f9f2e9]/80 mb-4 tracking-wider">
            HOW IT WORKS
          </div>

          {/* Main Title */}
          <div className="relative inline-block">
            {/* Star Icon (Left) */}
            <svg
              className="absolute -left-16 top-1/2 -translate-y-1/2 w-12 h-12 md:w-16 md:h-16 animate-float"
              viewBox="0 0 800 723"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0 0 C17.37068452 13.33011225 17.71989694 47.68176125 20.35605049 67.60808182 C21.31271475 74.8901744 22.25280459 82.17435638 23.18756104 89.45928955 C23.78109741 94.07560513 24.38109134 98.6910805 24.98046875 103.30664062 C28.52132903 130.60620932 28.52132903 130.60620932 29.95635223 142.04057598 C30.32565869 144.98181816 30.69775486 147.92270443 31.07002258 150.86357307 C31.32211151 152.86628847 31.56949967 154.8695938 31.81677246 156.87290955 C32.03992126 158.63556908 32.03992126 158.63556908 32.26757812 160.43383789 C32.45858093 161.96772911 32.45858093 161.96772911 32.65344238 163.53260803 C32.81377747 165.77557417 32.81377747 165.77557417 34.046875 166.81640625 C34.25143311 166.22142334 34.45599121 165.62644043 34.66674805 165.01342773 C42.69402273 141.82816216 51.46028909 118.48628362 63.00732422 96.78955078 C64.20396323 94.51824113 65.36172248 92.22884019 66.51953125 89.9375 C75.78532036 71.72975814 86.66187076 54.71362617 98.08666992 37.79589844 C101.391579 32.88301248 104.6149606 27.94662255 107.671875 22.875 C108.52845703 21.45477539 108.52845703 21.45477539 109.40234375 20.00585938 C110.45921838 18.23728888 111.50452573 16.46172605 112.53515625 14.67773438 C116.60538162 7.85928406 121.61975431 2.04074374 129.046875 -1.18359375 C148.62019716 -3.98399376 167.42054443 11.85006174 182.79541016 22.29541016 C186.41199207 24.73862262 190.0511534 27.14774187 193.68725586 29.56176758 C197.82029815 32.30923316 201.94401654 35.07055406 206.06835938 37.83105469 C208.88122642 39.70599197 211.70481668 41.56357286 214.53125 43.41796875 C234.26700317 56.47679076 234.26700317 56.47679076 237.046875 64.81640625 C238.93387647 83.40801094 225.44968192 100.72124418 215.35635376 115.33590698 C212.7896715 119.05310419 210.24884161 122.78796055 207.703125 126.51953125 C207.2061763 127.24635605 206.7092276 127.97318085 206.19721985 128.72203064 C200.81484982 136.59999466 195.59104883 144.57550885 190.45458984 152.61572266 C189.0202 154.85810733 187.57479071 157.09313887 186.12890625 159.328125 C171.18362247 182.56398866 157.44479783 206.63835808 146.046875 231.81640625 C154.68350856 226.44280949 163.01651209 220.75232741 171.23217773 214.75488281 C176.09459159 211.2101754 181.00563456 207.75789565 185.984375 204.37890625 C194.49030941 198.59170505 202.73915972 192.46720234 210.99804688 186.33496094 C215.32359147 183.1289448 219.684755 179.97235616 224.046875 176.81640625 C225.00231201 176.12345459 225.00231201 176.12345459 225.97705078 175.41650391 C230.55946715 172.09307371 235.14878321 168.77944454 239.74462891 165.47460938 C241.22530679 164.40814446 242.70429226 163.33932376 244.18115234 162.26757812 C306.58960615 116.99230353 306.58960615 116.99230353 332.046875 119.81640625 C340.38081304 121.92851879 346.11743629 126.09346073 350.66308594 133.42211914 C352.2978923 136.43965231 353.84202121 139.48817186 355.359375 142.56640625 C356.49548945 144.81410763 357.63221384 147.06150081 358.76953125 149.30859375 C359.60121826 150.96713379 359.60121826 150.96713379 360.44970703 152.65917969 C362.66556075 157.03940291 364.98095729 161.36358382 367.296875 165.69140625 C371.01001275 172.68434585 374.45068679 179.77945526 377.78295898 186.9609375 C380.12810026 191.98452371 382.66592698 196.84736592 385.359375 201.69140625 C391.58046542 212.97856568 396.98716224 228.17114945 393.3984375 241.1640625 C386.84911927 255.69011446 366.89910351 260.4137475 353.16546631 265.89541626 C349.09974293 267.51915532 345.04033893 269.15856797 340.98046875 270.796875 C340.14884216 271.13220749 339.31721558 271.46753998 338.46038818 271.81303406 C330.08975035 275.19316269 321.75158998 278.64934761 313.421875 282.12890625 C312.33404724 282.58313461 312.33404724 282.58313461 311.22424316 283.04653931 C305.83028215 285.29957087 300.43842632 287.55761569 295.046875 289.81640625 C293.28174855 290.55568858 291.51661151 291.29494564 289.75146484 292.03417969 C286.98999058 293.19068402 284.22852257 294.34720324 281.46708679 295.50379944 C272.48443122 299.26600168 263.50089492 303.02609434 254.51623535 306.7835083 C252.12879754 307.78213923 249.74163212 308.781419 247.35449219 309.78076172 C243.86320979 311.24182899 240.37039762 312.69917121 236.87619019 314.15322876 C235.03179101 314.92165156 233.18884871 315.69356827 231.34594727 316.46557617 C229.72644165 317.13810425 229.72644165 317.13810425 228.07421875 317.82421875 C227.14343506 318.2123877 226.21265137 318.60055664 225.25366211 319.00048828 C223.046875 319.81640625 223.046875 319.81640625 221.046875 319.81640625 C221.046875 320.47640625 221.046875 321.13640625 221.046875 321.81640625 C222.05116578 321.8050596 223.05545656 321.79371296 224.0901804 321.78202248 C235.18132039 321.6963972 246.18987505 322.14441255 257.25952148 322.79443359 C259.11767884 322.89995633 260.97585934 323.00507211 262.83406067 323.1098175 C267.82557449 323.39251098 272.81671442 323.68134085 277.80778384 323.97176313 C281.9903898 324.21460965 286.17316391 324.45448978 290.35593754 324.69442809 C300.22315069 325.26053769 310.09005785 325.83177305 319.95678711 326.40625 C330.11246975 326.99745816 340.26863164 327.57984326 350.42506737 328.15795743 C359.17738537 328.65646516 367.92937475 329.16047662 376.68112427 329.66886675 C381.89456171 329.97165888 387.10809655 330.27239128 392.32195854 330.56779099 C397.21852617 330.84544984 402.11464598 331.13000584 407.0105114 331.41977501 C408.80095879 331.52460823 410.59154792 331.62705392 412.38228226 331.72686577 C441.61049604 333.36063292 441.61049604 333.36063292 450.609375 343.31640625 C455.72186895 350.39798139 458.25726108 359.09563813 461.14208984 367.25927734 C461.95340823 369.55224788 462.78495398 371.83607407 463.62890625 374.1171875 C466.43029571 381.76247806 468.20628423 388.13007861 468.359375 396.31640625 C468.39675781 397.60546875 468.43414063 398.89453125 468.47265625 400.22265625 C467.9588143 411.00721993 462.75668648 421.19064488 458.171875 430.75390625 C457.31011536 432.57990439 456.44836927 434.40590902 455.58728027 436.23222351 C454.68815714 438.13624626 453.78527515 440.0384516 452.88183594 441.94042969 C450.11917302 447.76486925 447.40901714 453.61377979 444.6907959 459.45904541 C443.2278435 462.60100687 441.75832415 465.73989147 440.2890625 468.87890625 C438.28309267 473.16550767 436.28732835 477.45646975 434.3046875 481.75390625 C433.51057517 483.46231327 432.7163171 485.17065256 431.921875 486.87890625 C431.40898926 488.00244507 431.40898926 488.00244507 430.88574219 489.14868164 C427.73815945 495.87960542 424.17224083 500.92659585 417.046875 503.81640625 C404.50319119 507.64578918 391.10867986 499.15934034 380.28189087 493.56497192 C376.32236134 491.52091115 372.34403483 489.5140072 368.3671875 487.50390625 C367.17495323 486.90002831 367.17495323 486.90002831 365.95863342 486.28395081 C346.34584447 476.37705266 326.19723597 467.56287654 306.046875 458.81640625 C304.88462402 458.31141602 303.72237305 457.80642578 302.52490234 457.28613281 C297.55503462 455.12763086 292.58479526 452.97003695 287.6105957 450.8215332 C281.63622601 448.24077448 275.66517736 445.65330007 269.70661926 443.03619385 C266.92818115 441.81616925 264.14803058 440.60007487 261.36776733 439.38421631 C260.03701353 438.80092591 258.70710497 438.21570302 257.37808228 437.628479 C255.53677316 436.815106 253.6922855 436.00894001 251.84765625 435.203125 C250.79747314 434.74123779 249.74729004 434.27935059 248.6652832 433.8034668 C246.04539346 432.64003686 246.04539346 432.64003686 243.046875 432.81640625 C243.61535156 433.37328125 244.18382812 433.93015625 244.76953125 434.50390625 C245.54167969 435.26703125 246.31382812 436.03015625 247.109375 436.81640625 C247.86347656 437.55890625 248.61757813 438.30140625 249.39453125 439.06640625 C251.45907588 441.20696504 253.42122521 443.36838521 255.3671875 445.61328125 C259.70914464 450.61984166 264.28753522 455.39268683 268.88085938 460.16796875 C269.51958984 460.84085937 270.15832031 461.51375 270.81640625 462.20703125 C271.38979736 462.80547852 271.96318848 463.40392578 272.55395508 464.02050781 C274.08320806 465.86011288 275.06851402 467.64120661 276.046875 469.81640625 C276.706875 469.81640625 277.366875 469.81640625 278.046875 469.81640625 C279.66796875 471.4609375 279.66796875 471.4609375 281.484375 473.62890625 C284.02026832 476.6410389 284.02026832 476.6410389 286.76953125 479.453125 C288.046875 480.81640625 288.046875 480.81640625 288.046875 482.81640625 C288.706875 482.81640625 289.366875 482.81640625 290.046875 482.81640625 C291.3515625 484.109375 291.3515625 484.109375 292.921875 486.00390625 C296.09662427 489.74393179 299.38619698 493.35719058 302.734375 496.94140625 C308.53417884 503.1840545 314.0996781 509.60655195 319.60302734 516.11083984 C320.98307485 517.74104138 322.36775915 519.36717168 323.75390625 520.9921875 C334.84376907 534.0142519 345.69850458 547.19650441 356.046875 560.81640625 C356.83191406 561.82574219 357.61695313 562.83507812 358.42578125 563.875 C364.96648518 572.28447648 371.25028696 580.86654599 377.42871094 589.54541016 C378.49352118 591.03980738 379.56179251 592.5317455 380.63378906 594.02099609 C395.03322318 614.05558462 395.03322318 614.05558462 394.41796875 624.6640625 C392.97134557 633.05447697 387.42473264 637.68059479 381.046875 642.81640625 C377.88274374 645.03120006 374.61530158 647.02981269 371.296875 649.00390625 C369.43989322 650.1298605 367.58312856 651.25617291 365.7265625 652.3828125 C364.78522461 652.95016113 363.84388672 653.51750977 362.87402344 654.10205078 C359.24312293 656.30379373 355.64347042 658.5537072 352.04296875 660.8046875 C343.01093873 666.44465856 333.88062719 671.88045843 324.640625 677.171875 C321.51992285 678.96016492 318.41779985 680.7758079 315.328125 682.6171875 C314.5659668 683.0706958 313.80380859 683.5242041 313.01855469 683.99145508 C311.5900862 684.84335601 310.163489 685.69840685 308.73925781 686.55737305 C300.8822826 691.23335094 293.38163513 694.83668183 284.046875 693.81640625 C270.68330521 690.27824206 262.32266019 673.52465777 255.046875 662.81640625 C254.21663818 661.5948584 254.21663818 661.5948584 253.36962891 660.34863281 C240.31144527 641.06533964 227.96963431 621.33035059 215.64453125 601.57421875 C210.47962862 593.29993206 205.26380287 585.0579481 200.046875 576.81640625 C192.87538621 565.4871093 185.73959891 554.13646792 178.64038086 542.76171875 C174.0571792 535.42196664 169.44828117 528.09891045 164.81445312 520.79101562 C164.36005859 520.07365234 163.90566406 519.35628906 163.4375 518.6171875 C163.04594727 518.00012939 162.65439453 517.38307129 162.25097656 516.74731445 C160.82083655 514.45392894 159.43221304 512.13707284 158.046875 509.81640625 C158.73756162 543.82413647 161.01019044 577.71479096 163.8359375 611.60546875 C163.9971386 613.54606992 164.15832221 615.48667255 164.31948853 617.42727661 C165.05036202 626.21010654 165.78805118 634.99219494 166.55148125 643.77226067 C166.87161305 647.47437181 167.18380819 651.17712666 167.49442673 654.88004684 C167.64182805 656.61443444 167.79278501 658.34852421 167.94762039 660.08226395 C170.57340919 689.52271425 170.57340919 689.52271425 161.734375 701.19140625 C152.30947034 710.39712708 139.91569281 710.17723066 127.421875 710.87890625 C126.38824829 710.94002594 126.38824829 710.94002594 125.33374023 711.00238037 C109.58062462 711.93341024 93.82327862 712.48113439 78.046875 712.81640625 C76.27207764 712.85942871 76.27207764 712.85942871 74.46142578 712.90332031 C71.17737251 712.97693081 67.89399443 713.02673942 64.609375 713.06640625 C63.66320312 713.08783691 62.71703125 713.10926758 61.7421875 713.13134766 C54.2563033 713.16801654 48.05764186 711.84288394 41.796875 707.62890625 C32.02047076 697.63031101 30.74442534 684.65201603 29.109375 671.25390625 C28.98672775 670.26073395 28.98672775 670.26073395 28.86160278 669.24749756 C24.72409656 635.36287593 22.85631443 601.16297543 20.99780273 567.09228516 C20.94057037 566.07092468 20.88333801 565.04956421 20.82437134 563.99725342 C20.71734457 562.08198935 20.61418753 560.1665039 20.51547241 558.25079346 C20.67283678 554.2057169 20.67283678 554.2057169 19.046875 550.81640625 C9.42232828 571.42345235 0.95446138 592.41666368 -7.078125 613.69140625 C-7.3148719 614.31796867 -7.5516188 614.9445311 -7.79553986 615.59008026 C-12.64248445 628.42371675 -17.43792591 641.27511146 -22.0390625 654.19921875 C-22.3397464 655.04217499 -22.6404303 655.88513123 -22.95022583 656.75363159 C-24.2926487 660.5248254 -25.6214235 664.29974209 -26.92236328 668.08544922 C-30.70800141 678.96699374 -34.59132364 688.82909672 -44.953125 694.81640625 C-55.45520947 698.31710107 -65.94516159 694.14254508 -75.953125 690.81640625 C-76.70174805 690.57535156 -77.45037109 690.33429687 -78.22167969 690.0859375 C-115.85252183 677.93347417 -152.48517033 659.82548728 -185.953125 638.81640625 C-187.41878906 637.91148437 -187.41878906 637.91148437 -188.9140625 636.98828125 C-195.24025496 632.86976299 -199.56158313 628.86074552 -201.609375 621.4375 C-202.87008391 613.69141351 -200.62427651 607.66671473 -196.21875 601.31640625 C-192.10713364 596.05353731 -187.60196501 591.11821015 -183.10546875 586.18359375 C-181.19494553 584.08236495 -179.31644052 581.95943426 -177.453125 579.81640625 C-174.86659188 576.84248914 -172.23118375 573.91859882 -169.578125 571.00390625 C-165.62624563 566.63004654 -161.90037135 562.10668503 -158.1953125 557.5234375 C-156.05828718 554.94337034 -153.84576755 552.4692614 -151.578125 550.00390625 C-146.52156479 544.44695727 -141.94592735 538.55576543 -137.3515625 532.61767578 C-135.55597291 530.30485107 -133.74093911 528.00773147 -131.92553711 525.71044922 C-117.93352992 507.9890993 -104.40547633 489.9092669 -91.05004883 471.70532227 C-86.74557002 465.85221854 -82.33863898 460.09072615 -77.84375 454.3828125 C-76.24869253 452.21762085 -75.10710523 450.22372659 -73.953125 447.81640625 C-74.99984375 448.49703125 -76.0465625 449.17765625 -77.125 449.87890625 C-112.36183037 472.58158956 -149.69563517 490.84580899 -187.953125 507.81640625 C-189.04850586 508.30270508 -190.14388672 508.78900391 -191.27246094 509.29003906 C-196.29296244 511.51419216 -201.31957532 513.72384112 -206.3515625 515.921875 C-210.66035688 517.80554856 -214.96101742 519.7064837 -219.25627136 521.62075806 C-222.26522398 522.96168893 -225.27569947 524.29918483 -228.28616333 525.63671875 C-229.74071377 526.28404397 -231.19458457 526.93289914 -232.64767456 527.58349609 C-240.24943678 530.98597005 -247.8763223 534.25676159 -255.66796875 537.203125 C-256.32575821 537.45326859 -256.98354767 537.70341217 -257.66127014 537.96113586 C-265.93103973 541.02825372 -275.95767348 543.02786705 -284.328125 539.25390625 C-295.67583711 532.44058014 -298.54219317 519.18766067 -301.59626961 507.1061964 C-302.13072119 504.9473694 -302.65589494 502.78643625 -303.1796875 500.625 C-303.56567822 499.05607511 -303.95180037 497.48718254 -304.33804321 495.9183197 C-308.53948046 478.74548401 -312.38069986 461.49029705 -316.15771484 444.2199707 C-316.94278523 440.63106574 -317.73398022 437.04359845 -318.53076172 433.45727539 C-332.17832811 372.02177185 -332.17832811 372.02177185 -324.390625 358.00390625 C-317.94322353 352.21777672 -310.01485387 349.98892167 -301.63427734 348.6862793 C-300.68218069 348.52610919 -299.73008404 348.36593908 -298.74913597 348.20091534 C-288.87919747 346.56981511 -278.97178493 345.20585487 -269.0546875 343.8984375 C-267.10631266 343.63749475 -265.15800615 343.37604141 -263.20976257 343.11412048 C-259.10990076 342.56376023 -255.00966834 342.01629517 -250.90908813 341.47131348 C-241.27427552 340.19049062 -231.6416382 338.8934601 -222.00883675 337.59761429 C-218.79088861 337.16483344 -215.57286703 336.73260163 -212.35484314 336.30038452 C-194.33113532 333.8775813 -176.31664958 331.39225585 -158.30883026 328.8541832 C-156.27304691 328.5674516 -154.2371556 328.28149842 -152.20123291 327.99575806 C-148.48935807 327.47429626 -144.77780589 326.95061336 -141.06640625 326.42578125 C-139.99710373 326.27535873 -138.92780121 326.12493622 -137.82609558 325.96995544 C-136.85134781 325.83130569 -135.87660004 325.69265594 -134.87231445 325.54980469 C-134.03602005 325.43135193 -133.19972565 325.31289917 -132.33808899 325.19085693 C-129.85976124 324.8017477 -127.40943192 324.32520304 -124.953125 323.81640625 C-132.87153303 317.7327513 -140.98165786 311.96252772 -149.17602539 306.2578125 C-155.62487495 301.76244876 -162.01099538 297.18771307 -168.37353516 292.57128906 C-173.37320854 288.94737951 -178.40169405 285.36776482 -183.453125 281.81640625 C-189.31804203 277.69254086 -195.14719324 273.52289745 -200.953125 269.31640625 C-229.602033 248.58186654 -258.73675162 229.09858262 -289.32763672 211.34082031 C-290.62725342 210.58623535 -290.62725342 210.58623535 -291.953125 209.81640625 C-292.67387207 209.39842773 -293.39461914 208.98044922 -294.13720703 208.54980469 C-304.75937001 202.35376882 -315.16154723 196.22137792 -318.51171875 183.734375 C-320.80999849 170.5844239 -313.23589934 158.94279849 -307.12207031 147.9296875 C-305.71717417 145.38984184 -304.37036115 142.82077474 -303.015625 140.25390625 C-295.3247087 126.3370101 -286.74763216 113.3344044 -276.953125 100.81640625 C-276.24414062 99.8934375 -275.53515625 98.97046875 -274.8046875 98.01953125 C-258.01750807 76.50453394 -258.01750807 76.50453394 -246.953125 72.81640625 C-237.06155836 71.94872497 -229.97621285 76.0269433 -221.765625 81.203125 C-221.07319702 81.6380275 -220.38076904 82.07292999 -219.6673584 82.52101135 C-211.13933862 87.91427878 -202.79808966 93.58343295 -194.453125 99.25390625 C-192.87907457 100.31991004 -191.30485616 101.38566584 -189.73046875 102.45117188 C-180.94693705 108.40039354 -172.1916883 114.38981879 -163.45458984 120.40698242 C-159.86254997 122.88045322 -156.26066942 125.33928834 -152.65625 127.79467773 C-127.28219555 145.0917493 -102.3556233 163.0343545 -78.66796875 182.59765625 C-70.58766805 189.20141279 -62.3413814 195.60909651 -53.953125 201.81640625 C-56.303926 194.24716049 -59.3363322 187.01641325 -62.41958618 179.72375488 C-76.53520383 146.20586018 -88.31472056 111.65753986 -96.77587891 76.2734375 C-99.00173404 67.16412147 -102.01568142 58.39145258 -105.29223633 49.61206055 C-106.59152892 46.08184369 -107.14080836 43.25848411 -107.203125 39.50390625 C-107.24179687 38.11751953 -107.24179687 38.11751953 -107.28125 36.703125 C-106.62607219 30.93912025 -103.7367404 27.11547769 -99.578125 23.25390625 C-98.82789063 22.53074219 -98.07765625 21.80757812 -97.3046875 21.0625 C-87.55100233 13.7134139 -72.76955724 11.16044586 -61.25292969 7.67749023 C-58.2209593 6.75930708 -55.19243414 5.83036495 -52.1640625 4.90039062 C-43.30596754 2.19720804 -34.44098794 -0.43787919 -25.4375 -2.6171875 C-24.44342133 -2.86348656 -24.44342133 -2.86348656 -23.42926025 -3.11476135 C-14.97148854 -5.07238679 -7.45776925 -4.51940816 0 0 Z"
                fill="#D77FD1"
                transform="translate(329.953125,8.18359375)"
              />
            </svg>

            {/* Title Text */}
            <h2 className="text-3xl md:text-5xl lg:text-6xl font-bold text-[#f9f2e9] leading-tight">
              <span className="block wonky-text" style={{ transform: 'rotate(-0.5deg) translateX(-2px)' }}>
                SIMPLE.
              </span>
              <span className="block wonky-text" style={{ transform: 'rotate(0.8deg) translateX(3px)' }}>
                FOUR STEPS
              </span>
              <span className="block flex items-center justify-center gap-3 mt-2 wonky-text" style={{ transform: 'rotate(-0.3deg)' }}>
                <span>TO GET STARTED</span>
              </span>
            </h2>

            {/* Blob Icon (Right) */}
            <svg
              className="absolute -right-16 top-1/2 -translate-y-1/2 w-12 h-12 md:w-16 md:h-16 animate-float"
              style={{ animationDelay: '1s' }}
              viewBox="0 0 768 800"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0 0 C23.70271819 -0.84875602 44.7889784 7.21993124 65.3671875 18.1953125 C66.34123535 18.71134033 66.34123535 18.71134033 67.33496094 19.23779297 C83.56202912 27.90057576 98.65704572 37.91951979 112.3671875 50.1953125 C113.2128125 50.93136719 114.0584375 51.66742188 114.9296875 52.42578125 C131.04487034 66.60404307 144.12265568 81.92641883 155.3671875 100.1953125 C158.95191961 96.66726749 158.95191961 96.66726749 162.1796875 92.8203125 C184.08420765 66.53488832 222.51099016 53.85914655 255.41015625 50.796875 C259.39553281 50.50106972 263.37325752 50.30666742 267.3671875 50.1953125 C268.10453125 50.17339844 268.841875 50.15148438 269.6015625 50.12890625 C317.94378432 48.91223959 375.60231489 56.89585759 414.3671875 88.1953125 C415.18050537 88.84258301 415.18050537 88.84258301 416.01025391 89.50292969 C446.81530259 114.18475571 463.31243281 151.39223107 468.15234375 190.06640625 C472.01516601 225.40604991 464.2692814 258.8284548 450.3671875 291.1953125 C450.05555664 291.9284668 449.74392578 292.66162109 449.42285156 293.41699219 C439.71561929 315.9850232 425.33852757 335.57039066 408.3671875 353.1953125 C407.81095703 353.77345703 407.25472656 354.35160156 406.68164062 354.94726562 C399.62501703 362.23781044 392.51287618 369.11472799 384.3671875 375.1953125 C383.04643329 376.19733472 381.72616115 377.19999252 380.40625 378.203125 C374.48558603 382.68446679 368.58902193 387.13759439 362.3671875 391.1953125 C362.88925781 391.42081787 363.41132812 391.64632324 363.94921875 391.87866211 C381.32618981 399.42783003 397.22238584 407.78510258 412.3671875 419.1953125 C413.19089844 419.7934375 414.01460937 420.3915625 414.86328125 421.0078125 C434.04462753 435.49894763 448.37701933 454.02100027 459.3671875 475.1953125 C459.83640625 476.09121094 460.305625 476.98710937 460.7890625 477.91015625 C483.63903333 524.8712976 489.58040389 595.28494879 472.3671875 645.1953125 C462.67632934 671.60456555 445.85306396 692.78966493 422.3671875 708.1953125 C421.54726318 708.74243896 420.72733887 709.28956543 419.88256836 709.85327148 C413.49605243 714.03456003 407.01351313 717.50612317 400.0546875 720.6328125 C399.01852295 721.10090332 397.9823584 721.56899414 396.91479492 722.05126953 C379.82562486 729.65598268 362.68608772 735.4147527 344.3671875 739.1953125 C343.60583496 739.35370605 342.84448242 739.51209961 342.06005859 739.67529297 C328.99003245 742.35506659 316.39795697 743.43201343 303.0546875 743.4453125 C302.34987244 743.44631958 301.64505737 743.44732666 300.91888428 743.44836426 C288.85398984 743.43676044 277.21426113 742.54168916 265.3671875 740.1953125 C264.60873535 740.05077637 263.8502832 739.90624023 263.06884766 739.75732422 C229.59032449 733.27135417 198.99948714 719.30531024 169.11499023 703.22900391 C168.03713257 702.64965088 168.03713257 702.64965088 166.9375 702.05859375 C166.31633301 701.72126221 165.69516602 701.38393066 165.05517578 701.03637695 C163.19364606 700.05966217 163.19364606 700.05966217 160.3671875 699.1953125 C160.14160156 700.00613281 159.91601562 700.81695313 159.68359375 701.65234375 C158.0386252 706.07960333 155.78244056 709.87597282 153.3046875 713.8828125 C152.56387939 715.08200317 152.56387939 715.08200317 151.80810547 716.30541992 C141.52189687 732.68943087 127.9787994 745.92693109 112.3671875 757.1953125 C111.10648437 758.11376953 111.10648437 758.11376953 109.8203125 759.05078125 C107.36140375 760.80657067 104.87428329 762.50905844 102.3671875 764.1953125 C101.32175781 764.90429688 100.27632813 765.61328125 99.19921875 766.34375 C90.6135932 772.07242826 81.71813695 776.83888673 72.3671875 781.1953125 C71.75842773 781.48035645 71.14966797 781.76540039 70.52246094 782.05908203 C62.01705038 785.99591188 53.4671713 788.98480813 44.3671875 791.1953125 C43.66400391 791.37868164 42.96082031 791.56205078 42.23632812 791.75097656 C-0.12886698 802.57112795 -49.32058271 793.10388815 -86.6328125 771.1953125 C-94.85156502 766.16443975 -102.26559974 760.38703002 -109.6328125 754.1953125 C-110.49648437 753.51984375 -111.36015625 752.844375 -112.25 752.1484375 C-115.84155955 749.20453623 -118.64404354 745.73433932 -121.6328125 742.1953125 C-122.42171875 741.29425781 -123.210625 740.39320313 -124.0234375 739.46484375 C-130.04411468 732.47457899 -135.10126555 725.25787887 -139.6328125 717.1953125 C-140.00293457 716.53869629 -140.37305664 715.88208008 -140.75439453 715.20556641 C-166.67406013 668.7720572 -171.59120722 615.98845873 -157.4765625 564.859375 C-154.77008012 556.13645545 -150.85000885 548.1525331 -146.62158203 540.09228516 C-145.08585811 537.14597037 -143.61169323 534.17055482 -142.1328125 531.1953125 C-141.29947917 529.52864583 -140.46614583 527.86197917 -139.6328125 526.1953125 C-140.21957764 526.21102295 -140.80634277 526.2267334 -141.41088867 526.24291992 C-176.26086621 527.04472991 -208.55228178 520.05006328 -236.5078125 498.3203125 C-237.42844482 497.60536621 -237.42844482 497.60536621 -238.36767578 496.87597656 C-239.83217628 495.70049445 -241.2388758 494.45366873 -242.6328125 493.1953125 C-242.6328125 492.5353125 -242.6328125 491.8753125 -242.6328125 491.1953125 C-243.19613281 490.96328125 -243.75945312 490.73125 -244.33984375 490.4921875 C-261.40237762 480.84182763 -272.21557091 454.15300585 -277.27734375 436.46875 C-289.85862895 389.22437684 -281.83931702 340.11643198 -257.7578125 298.0078125 C-248.97290363 283.88583534 -237.50597992 270.70445919 -224.6328125 260.1953125 C-223.52938389 259.25717342 -222.42658144 258.31829761 -221.32421875 257.37890625 C-194.44032017 234.73176515 -165.03889636 219.43003172 -131.66381836 208.91625977 C-129.66467838 208.37045434 -129.66467838 208.37045434 -128.6328125 207.1953125 C-128.88973795 205.08376594 -129.22630086 202.98186091 -129.59375 200.88671875 C-129.7037735 200.24596909 -129.813797 199.60521942 -129.92715454 198.9450531 C-130.28203139 196.88167266 -130.64433294 194.81969357 -131.0078125 192.7578125 C-135.16676467 169.01948809 -137.61595297 143.84540852 -131.6328125 120.1953125 C-131.34277344 119.01839844 -131.05273438 117.84148437 -130.75390625 116.62890625 C-119.71320861 75.28403434 -93.06177253 38.91931788 -55.859375 17.37109375 C-38.58419996 7.75988497 -19.82901857 1.06607627 0 0 Z"
                fill="#E93827"
                transform="translate(285.6328125,1.8046875)"
              />
            </svg>
          </div>
        </div>

        {/* Cards Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8">
          {cards.map((card, index) => (
            <div
              key={index}
              ref={(el) => {
                cardRefs.current[index] = el
              }}
              className="relative bg-[#f9f2e9] rounded-3xl p-6 md:p-8 shadow-lg hover:shadow-xl transition-shadow duration-300 border-2 border-[#2d2d2d]"
              style={{
                backgroundImage: `url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E")`,
              }}
            >
              {/* Number */}
              <div className="text-sm font-medium text-[#2d2d2d]/60 mb-4 text-center">
                {card.number}
              </div>

              {/* Title */}
              <h3 className="text-xl md:text-2xl font-bold text-[#2d2d2d] mb-6 text-center tracking-tight wonky-text">
                {card.title}
              </h3>

              {/* Icon */}
              <div className="flex justify-center mb-6">
                {card.icon}
              </div>

              {/* Description */}
              <p className="text-sm md:text-base text-[#2d2d2d]/80 leading-relaxed text-center">
                {card.description}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )
}

export default HowItWorks

